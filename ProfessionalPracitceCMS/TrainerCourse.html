<!DOCTYPE html>
<html lang="en" dir="ltr" class="dark-mode">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>trainer courses</title>

    <!-- Prevent the demo from appearing in search engines -->
    <meta name="robots" content="noindex">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CRoboto:400,500%7CExo+2:600&display=swap"
        rel="stylesheet">

    <!-- Preloader -->
    <link type="text/css" href="public/vendor/spinkit.css" rel="stylesheet">

    <!-- Perfect Scrollbar -->
    <link type="text/css" href="public/vendor/perfect-scrollbar.css" rel="stylesheet">

    <!-- Material Design Icons -->
    <link type="text/css" href="public/css/material-icons.css" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link type="text/css" href="public/css/fontawesome.css" rel="stylesheet">

    <!-- Preloader -->
    <link type="text/css" href="public/css/preloader.css" rel="stylesheet">

    <!-- App CSS -->
    <link type="text/css" href="public/css/app.css" rel="stylesheet">

    <!-- Dark Mode CSS -->
    <link type="text/css" href="public/css/dark.css" rel="stylesheet">

    <!-- my css styles -->
    <link rel="stylesheet" href="myCss/mine.css">

    <!-- my added bootstrap.css -->
    <!-- <link rel="stylesheet" type="text/css" href="myCss/bootstrap.css"> -->
</head>

<body class="layout-app ">

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <form class="modal-content bg-dark" id="myForm">
                <div class="d-flex justify-content-between w-100 p-3">
                    <!-- Close button at the left end -->
                    <h3 class="modal-title " id="exampleModalLabel">Trainer</h1>
                        <button type="button" class="btn-close btn-close-white " data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="UserId" name="UserId" value="-1" hidden>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control input-text" id="FirstName"
                            placeholder="Enter name" name="FirstName">
                        <label for="FirstName">First Name</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control input-text" id="LastName"
                            placeholder="Enter last name" name="LastName">
                        <label for="LastName">Last Name</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control input-text" id="Tel"
                            placeholder="Enter Tel" name="Tel">
                        <label for="Tel">Tel</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="email" class="form-control input-text" id="Email"
                            placeholder="Enter email" name="Email">
                        <label for="Email">Email</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="hidden" class="form-control" id="isActive" name="IsActive" value="1">
                    </div>
                    <div class="toggle-icon" id="toggleButton">
                        <div class="label-box">Active</div>
                        <i id="icon" class="fa fa-check"></i>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" id="save">Submit</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Preloader -->
    <div class="preloader">
        <div class="sk-chase">
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
        </div>
    </div>

    <!-- Drawer Layout -->
    <div class="mdk-drawer-layout js-mdk-drawer-layout" data-push data-responsive-width="992px">
        <div class="mdk-drawer-layout__content page-content">
            <!-- Header -->
            <div id="myHeader"> </div>
            <h1>These are the trainer courses</h1>
            <!-- // END Header -->

            <!-- Page Content -->
            <div class="mdk-box mdk-box--bg-primary bg-dark js-mdk-box mb-0"
                data-effects="parallax-background blend-background">
                <div class="mdk-box__bg">
                    <div class="mdk-box__bg-front"
                        style="background-image: url(public/images/1280_work-station-straight-on-view.jpg);">
                    </div>
                </div>
                <div class="mdk-box__content justify-content-center">
                    <div class="hero container page__container text-center py-112pt">
                         <!-- New Courses Button (Redirects to instructor-edit-course.html) -->
                         <button type="button" class="btn btn-primary ml-2 bg-dark" id="btnNewCourses">New Courses</button>
                         <div class="d-flex justify-content-between align-items-center">
                            
                            <div class="page-separator w-100">
                                <div class="page-separator__text">Trainers</div>
                            </div>
                        
   
    <div class="card table-responsive mb-24pt" style="padding-top: 20px; overflow: hidden;">
        <table id="tbl" class="table table-flush table--elevated">
            <thead class="table-headings">
                <tr>
                    <th>Course Name</th>
                    <th>edit</th>
                    <th>delete</th>

                </tr>
            </thead>
            <tbody id="coursesList">
                <!-- Course rows will be inserted here dynamically -->
            </tbody>
        </table>
    </div>
        <!-- // END drawer-layout__content -->

        <!-- Drawer -->
        <div class="mdk-drawer js-mdk-drawer" id="default-drawer">
            <div class="mdk-drawer__content">
                <div class="sidebar sidebar-black-dodger-blue sidebar-left" data-perfect-scrollbar>
                    <div id="mySidebar"></div>
                    <!-- Sidebar Content -->
                </div>
            </div>
            <!-- // END Drawer -->
        </div>
    </div>
    <!-- // END Drawer Layout -->

    <!-- Header -->
    <script src="components/header.js"></script>

    <!-- Footer -->
    <script src="components/footer.js"></script>

    <!-- sidebar -->
    <script src="components/sidebar.js"></script>

    <!-- jQuery -->
    <script src="public/vendor/jquery.min.js"></script>

    <!-- Bootstrap -->
    <script src="myJS/bootstrap.bundle.min.js"></script>
    <script src="public/vendor/popper.min.js"></script>
    <script src="public/vendor/bootstrap.min.js"></script>

    <!-- Perfect Scrollbar -->
    <script src="public/vendor/perfect-scrollbar.min.js"></script>

    <!-- DOM Factory -->
    <script src="public/vendor/dom-factory.js"></script>

    <!-- MDK -->
    <script src="public/vendor/material-design-kit.js"></script>

    <!-- App JS -->
    <script src="public/js/app.js"></script>

    <!-- Preloader -->
    <script src="public/js/preloader.js"></script>

    <!-- added scripts not included in template -->
    <!-- Datatable js-->
    <script src="myJS/datatables/jquery.dataTables.min.js"></script>
    <script src="myJS/datatables/custom-basic.js"></script>
    <script src="myJS/QueryStringDivider.js"></script>

    <script>
       $(document).ready(function() {
    // Extract TrainerId from the URL
    var urlParams = new URLSearchParams(window.location.search);
    var TrainerId = urlParams.get('TrainerId');

    // Define the URL using a template literal
    var url = 'api/';
    // Function to handle editing a course
   

document.getElementById('btnNewCourses').addEventListener('click', function() {
            window.location.href = 'instructor-edit-course.html?status=new';
        });
$(document).on('click', '.edit-icon', function() {
        // Get the courseId,
       
        window.location.href = `instructor-edit-course.html?status=update&TrainerId=${TrainerId}`  
    });

    // Function to handle deleting a course
    function deleteCourse(courseId) {
        // AJAX request to delete the course
        $.ajax({
            url: url + 'delete_course.php',
            type: 'POST',
            data: { courseId: courseId },
            dataType: 'json',
            success: function(response) {
                // Remove the row from the table
                $('#course_' + courseId).remove();
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.error('AJAX Error:', textStatus, errorThrown);
                // Handle errors here
            }
        });
    }
   // AJAX request to vwCourses.php
$.ajax({
    url: 'api/vwCourses.php?status=coursesByTRainer&TrainerId=' + TrainerId,
    type: 'GET',
    dataType: 'json',
    success: function(response) {
        console.log("success")
        console.log(response);
        // Check if the response contains 'courses' key
        
        var coursesHtml = '';
        response.forEach(function (course) {
                        coursesHtml += '<tr>';
                        coursesHtml += '<td>' + course.CourseName + '</td>';
                        coursesHtml += '<td><i class="fas fa-edit edit-icon" data-courseid="' + course.CourseId + '"></i></td>';
                        coursesHtml += '<td><i class="fas fa-trash delete-icon" data-courseid="' + course.CourseId + '"></i></td>';
                        coursesHtml += '</tr>';
                    });
        
        // Insert the generated HTML into the table body
        $('#coursesList').html(coursesHtml);
    },
    error: function(jqXHR, textStatus, errorThrown) {
        // Handle AJAX error
        console.error('AJAX Error:', textStatus, errorThrown);
        console.log(jqXHR)
        console.log("error1")
    }
});



});

    </script>
</body>

</html>
